"use strict";angular.module("cloakAndDaggerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","datamaps"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cloakAndDaggerApp").controller("MainCtrl",["$scope","$rootScope","$http",function(a,b,c){function d(b){c.get(e[b]).then(function(c){var d={};angular.forEach(d3.csv.parse(c.data),function(a){angular.forEach(a.Countries.split(","),function(c){c=c.replace(/^\s+/g,""),"undefined"==typeof f[c]&&(f[c]={}),"undefined"==typeof f[c][b]&&(f[c][b]=[]),c.match(/^[A-Z]+$/)&&(-1==g.indexOf(b)&&f[c][b].push(a),d[c]={fillKey:"EXISTS"})})}),a.mapObject={scope:"world",options:{height:300,legendHeight:60},fills:{EXISTS:"#CC4731",defaultFill:"#DDDDDD"},data:d},g.push(b)})}var e={Leaders:"data/Politicians-processed.csv","Corporate collaboration":"data/CollaborationIAC-processed.csv",Intelligence:"data/CollaborationINT-processed.csv",Corporations:"data/Corporations-processed.csv",Mass:"data/PubMASS-processed.csv",Targeted:"data/PubTARGETED-processed.csv"},f={},g=[];a.infoBox=!1,a.openPanel=function(b){a.selectedCategory=b,a.infoBox=!1,d(b)},a.updateActiveGeography=function(b){a.selectedCountry=b.properties.name,a.infoBox=!0,a.geoData=f[b.id][a.selectedCategory],a.$apply()},a.openPanel("Leaders")}]),angular.module("cloakAndDaggerApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("cloakAndDaggerApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row info-box" ng-hide="infoBox" ng-switch="selectedCategory"> <div ng-switch-when="Leaders"> <h4>Political leaders under surveillance</h4> <p>This section illustrates the politics of surveillance through which some countries have had unequal political advantage in global affairs and negotiations.</p> <p>As illustrated by the Snowden revelations, intelligence agencies spied on numerous international political leaders – including allies – to help their governments influence negotiations to their advantage. </p> <p>Such espionage has targeted the communications of international government representatives attending global summits, such as the <b>Copenhagen Climate Summit</b>, the <b>G20 Summits</b> in Toronto and London, as well as negotiations at the <b>United Nations Security Council</b> and the <b>trans-Atlantic free trade agreement.</b></p> </div> <div ng-switch-when="Corporate collaboration"> <h4>Collaboration between intelligence agencies and companies</h4> <p> This section illustrates the public-private partnerships of surveillance which have targeted the communications of citizens and government representatives around the world. </p> <p> As illustrated by the Snowden revelations, many of the Internet companies that we trust have worked hand-in-hand with intelligence agencies to develop surveillance back-doors, while other popular telecoms service providers have helped intelligence agencies intercept undersea cables. </p> </div> <div ng-switch-when="Intelligence"> <h4>Collaboration between intelligence agencies</h4> <p>This section illustrates some of the collaborations between intelligence agencies around the world.</p> <p>As illustrated by the Snowden revelations, such collaborations have targeted the communications of flight passengers, online gamers, corporations, law firms, government representatives and in some cases, the public at large. </p> </div> <div ng-switch-when="Corporations"> <h4>Corporations under surveillance</h4> <p> This section illustrates some of the companies that have been targeted by intelligence agencies around the world. </p> <p> As illustrated by the Snowden revelations, intelligence agencies have exploited the networks of telecom service providers and have even tapped into the communication links between the data centres of some of the most major Internet companies. </p> </div> <!-- \n    These are currently disabled. If you are interested in making them a reality please contribute :)\n    <div ng-switch-when="Mass">\n        <h4>Mass surveillance of citizens</h4>\n        <p>Bacon ipsum dolor amet swine cupim ground round landjaeger prosciutto salami fatback drumstick hamburger sirloin turkey beef ribs pork loin. Hamburger capicola short loin, pork chop tail short ribs shoulder meatloaf venison pig. Sirloin pastrami beef ribs cupim, tenderloin bacon pork chop capicola pork belly shoulder jerky. Flank swine short ribs, meatloaf capicola shoulder doner corned beef hamburger landjaeger.</p>\n    </div>\n    <div ng-switch-when="Targeted">\n        <h4>Targeted surveillance of citizens</h4>\n        <p>Bacon ipsum dolor amet swine cupim ground round landjaeger prosciutto salami fatback drumstick hamburger sirloin turkey beef ribs pork loin. Hamburger capicola short loin, pork chop tail short ribs shoulder meatloaf venison pig. Sirloin pastrami beef ribs cupim, tenderloin bacon pork chop capicola pork belly shoulder jerky. Flank swine short ribs, meatloaf capicola shoulder doner corned beef hamburger landjaeger.</p>\n        </div>\n    --!>\n    <p>\n    Select a country in the map below to learn more. \n    </p>\n\n</div>\n\n<div class="row">\n    <div class="navbar">\n        <div class="btn-group" role="group" aria-label="...">\n          <button type="button" class="btn btn-default" ng-class="{\'active\': selectedCategory == \'Leaders\'}" ng-click="openPanel(\'Leaders\')">Leaders</button>\n          <button type="button" class="btn btn-default" ng-class="{\'active\': selectedCategory == \'Corporate collaboration\'}" ng-click="openPanel(\'Corporate collaboration\')">Corporate collaboration</button>\n          <button type="button" class="btn btn-default" ng-class="{\'active\': selectedCategory == \'Intelligence\'}" ng-click="openPanel(\'Intelligence\')">Intelligence</button>\n          <button type="button" class="btn btn-default" ng-class="{\'active\': selectedCategory == \'Corporations\'}" ng-click="openPanel(\'Corporations\')">Corporations</button>\n          <!-- <button type="button" class="btn btn-default" ng-click="openPanel(\'Mass\')">Mass</button> --> <!-- <button type="button" class="btn btn-default" ng-click="openPanel(\'Targeted\')">Targeted</button> --> </div>   <div class="row" ng-hide="infoBox"> <datamap map="mapObject" on-click="updateActiveGeography"></datamap> </div> <div class="country-details" ng-show="infoBox"> <div class="row"> <h1>{{ selectedCountry }}</h1> </div> <div class="row revelation" ng-repeat="data in geoData" ng-init="enabled = false"> <h4>{{ data["Revelations"] }} <span ng-click="enabled = enabled ? false : true" class="label label-default"><i class="glyphicon glyphicon-plus-sign"></i></span></h4> <div class="well details" ng-show="enabled"> <div class="item" ng-if="[\'Revelations\', \'Countries\'].indexOf(key) == -1" ng-repeat="(key, value) in data"> <h4>{{key}}</h4> <p>{{value}}</p> </div> </div> </div> </div>')}]);